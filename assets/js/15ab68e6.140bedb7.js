(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{67:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return s}));var i=n(3),o=n(7),a=(n(0),n(96)),r={title:"Liquid To TypeScript Context"},c={unversionedId:"guides/liquid-to-ts-context",id:"guides/liquid-to-ts-context",isDocsHomePage:!1,title:"Liquid To TypeScript Context",description:"The ThemeContext object is one of the ShopifyBootstrapOptions object properties used in the Theme Bootstrap Process. The purpose of this object is to make data from Liquid available in the TypeScript context.",source:"@site/docs/guides/liquid-to-ts-context.md",slug:"/guides/liquid-to-ts-context",permalink:"/nx-shopify/docs/guides/liquid-to-ts-context",editUrl:"https://github.com/trafilea/nx-shopify/edit/master/docs/docs/guides/liquid-to-ts-context.md",version:"current",sidebar:"docs",previous:{title:"Environments",permalink:"/nx-shopify/docs/guides/environments"},next:{title:"Liquid in Styles",permalink:"/nx-shopify/docs/guides/liquid-in-styles"}},p=[{value:"Creation of the ThemeContext",id:"creation-of-the-themecontext",children:[]},{value:"Modifying the ThemeContext",id:"modifying-the-themecontext",children:[{value:"Modify the <code>ThemeContext</code> interface",id:"modify-the-themecontext-interface",children:[]},{value:"Modify the <code>theme-context</code> snippet",id:"modify-the-theme-context-snippet",children:[]}]}],m={toc:p};function s(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},m,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"ThemeContext")," object is one of the ",Object(a.b)("inlineCode",{parentName:"p"},"ShopifyBootstrapOptions")," object properties used in the ",Object(a.b)("a",{parentName:"p",href:"../theme-bootstrap"},"Theme Bootstrap Process"),". The purpose of this object is to make data from Liquid available in the TypeScript context."),Object(a.b)("h2",{id:"creation-of-the-themecontext"},"Creation of the ThemeContext"),Object(a.b)("p",null,"The value of this object comes from the ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context.liquid")," snippet. The ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context.liquid")," snippet is rendered in the ",Object(a.b)("inlineCode",{parentName:"p"},"src/theme/layout/theme/theme.liquid")," layout file."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-html",metastring:'{10} title="src/theme/layout/theme/theme.liquid"',"{10}":!0,title:'"src/theme/layout/theme/theme.liquid"'},"<html>\n  ...\n  <body>\n    ...\n    <script>\n      window.addEventListener('DOMContentLoaded', function() {\n        window.themeBootstrap({\n            themeLayoutName: 'theme',\n            themeTemplateName: '{{ template }}',\n            themeContext: {% render 'theme-context' %},\n            loadGlobal: true,\n        });\n      });\n    <\/script>\n  </body>\n</html>\n")),Object(a.b)("p",null,"By default, The ",Object(a.b)("inlineCode",{parentName:"p"},"ThemeContext")," object is defined in the ",Object(a.b)("inlineCode",{parentName:"p"},"src/core/theme-context.ts")," file that exports an interface with the same name"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/core/theme-context.ts"',title:'"src/core/theme-context.ts"'},"export interface ThemeContext {\n  themeName: string;\n}\n")),Object(a.b)("p",null,"and it's value, as mentioned above, is created in the ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context.liquid")," snippet:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-html",metastring:'title="src/theme/snippets/theme-context/theme-context.liquid"',title:'"src/theme/snippets/theme-context/theme-context.liquid"'},"{ themeName: '{{ theme.name }}', }\n")),Object(a.b)("p",null,"that follows the same structure defined by the ",Object(a.b)("inlineCode",{parentName:"p"},"ThemeContext")," interface."),Object(a.b)("h2",{id:"modifying-the-themecontext"},"Modifying the ThemeContext"),Object(a.b)("p",null,"In order add additional data to the ",Object(a.b)("inlineCode",{parentName:"p"},"ThemeContext")," you just need to follow two steps."),Object(a.b)("h3",{id:"modify-the-themecontext-interface"},"Modify the ",Object(a.b)("inlineCode",{parentName:"h3"},"ThemeContext")," interface"),Object(a.b)("p",null,"Add the additional properties to the theme context interface. For example, let's add the product information to the context:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript",metastring:'{1-4,8} title="src/core/theme-context.ts"',"{1-4,8}":!0,title:'"src/core/theme-context.ts"'},"export interface ProductContext {\n  name: string;\n  id: string;\n}\n\nexport interface ThemeContext {\n  themeName: string;\n  product?: ProductContext;\n}\n")),Object(a.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(a.b)("div",{parentName:"div",className:"admonition-heading"},Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",{parentName:"h5",className:"admonition-icon"},Object(a.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(a.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),Object(a.b)("div",{parentName:"div",className:"admonition-content"},Object(a.b)("p",{parentName:"div"},"You should take into account the data availability when defining your ",Object(a.b)("inlineCode",{parentName:"p"},"ThemeContext"),", while this context object has the same structure everywhere, not all the data may be avaialble for every template. For example, notice that the product property is optional (see the ",Object(a.b)("inlineCode",{parentName:"p"},"?")," symbol at the end of the property name) because the product information is not available in every theme template."))),Object(a.b)("h3",{id:"modify-the-theme-context-snippet"},"Modify the ",Object(a.b)("inlineCode",{parentName:"h3"},"theme-context")," snippet"),Object(a.b)("p",null,"Now that you already defined the new properties, create them in the liquid-built object. For our example:"),Object(a.b)("p",null,"Let's create a ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context-product")," snippet inside the ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context")," directory."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-bash"},"$ nx generate snippet theme-context-product --directory theme-context --project my-theme\n\nCREATE apps/my-theme/src/theme/snippets/theme-context/theme-context-product/theme-context-product.liquid\nCREATE apps/my-theme/src/theme/snippets/theme-context/theme-context-product/theme-context-product.snippet.scss\nCREATE apps/my-theme/src/theme/snippets/theme-context/theme-context-product/theme-context-product.snippet.ts\n")),Object(a.b)("p",null,"As we are only going to use the liquid file, we can delete the TypeScript and Styles files."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-bash"},"$ rm apps/my-theme/src/theme/snippets/theme-context/theme-context-product/theme-context-product.snippet.scss\n$ rm apps/my-theme/src/theme/snippets/theme-context/theme-context-product/theme-context-product.snippet.ts\n")),Object(a.b)("p",null,"This new snippet will be responsible of the newly defined ",Object(a.b)("inlineCode",{parentName:"p"},"ProductContext"),"."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-html",metastring:'title="theme-context-product.liquid"',title:'"theme-context-product.liquid"'},"{% if product %} { name: '{{ product.name }}', id: '{{ product.id }}', } {% else\n%} null {% endif %}\n")),Object(a.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(a.b)("div",{parentName:"div",className:"admonition-heading"},Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",{parentName:"h5",className:"admonition-icon"},Object(a.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(a.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),Object(a.b)("div",{parentName:"div",className:"admonition-content"},Object(a.b)("p",{parentName:"div"},"It is very important to follow the exact same type definition made in the ",Object(a.b)("inlineCode",{parentName:"p"},"ThemeContext")," interface when building the object in the ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context.liquid")," snippet. If you add additional data that is not in the interface, it will not be available in TypeScript."))),Object(a.b)("p",null,"Notice that, as the product variable is not always defined we need to provide a null value when is not present."),Object(a.b)("p",null,"Finally we need to render the ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context-product")," snippet in the ",Object(a.b)("inlineCode",{parentName:"p"},"theme-context")," snippet."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-html",metastring:'title="src/theme/snippets/theme-context/theme-context.liquid"',title:'"src/theme/snippets/theme-context/theme-context.liquid"'},"{ themeName: '{{ theme.name }}', product: {% render 'theme-context-product' %} }\n")),Object(a.b)("p",null,"That's it! You can structure the ",Object(a.b)("inlineCode",{parentName:"p"},"ThemeContext")," object as better fits your needs."))}s.isMDXComponent=!0},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var i=n(0),o=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=o.a.createContext({}),s=function(e){var t=o.a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},l=function(e){var t=s(e.components);return o.a.createElement(m.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},h=o.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,r=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),l=s(n),h=i,b=l["".concat(r,".").concat(h)]||l[h]||d[h]||a;return n?o.a.createElement(b,c(c({ref:t},m),{},{components:n})):o.a.createElement(b,c({ref:t},m))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=h;var c={};for(var p in t)hasOwnProperty.call(t,p)&&(c[p]=t[p]);c.originalType=e,c.mdxType="string"==typeof e?e:i,r[1]=c;for(var m=2;m<a;m++)r[m]=n[m];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);